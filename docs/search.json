[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "U.S. National Weather Service",
    "section": "",
    "text": "The U.S. National Weather Service is part of a federal agency that monitors climate (longterm weather averages), provides weather forecasts, warnings, and general information to the public. Their data is openly available for use through its API for developers.\n\n\n\n\n\n\nExploration Goal: Obtain 7-Day Forecast for New York\nThe NWS website states the grid forecast can be obtained with coordinates. The longitude and latitude points for New York are 40.730610, -73.935242 respectively.\n\n\n·Load Libraries:\n\nlibrary(httr2)\nlibrary(tidyverse)\nlibrary(repurrrsive)\nlibrary(ggplot2)\n\n\n\n·Assigning Values:\n\napi_base_url &lt;-  \"https://api.weather.gov/\"\nny_coords &lt;- \"https://api.weather.gov/points/40.7128,-74.0060\"\n\n\n\n·Requesting from the API:\n\nask_api&lt;- request(ny_coords) %&gt;% \n  req_perform()\n\napi_response&lt;- \n  resp_body_json(ask_api) %&gt;% \n  glimpse()\n\nList of 5\n $ @context  :List of 2\n  ..$ : chr \"https://geojson.org/geojson-ld/geojson-context.jsonld\"\n  ..$ :List of 17\n  .. ..$ @version        : chr \"1.1\"\n  .. ..$ wx              : chr \"https://api.weather.gov/ontology#\"\n  .. ..$ s               : chr \"https://schema.org/\"\n  .. ..$ geo             : chr \"http://www.opengis.net/ont/geosparql#\"\n  .. ..$ unit            : chr \"http://codes.wmo.int/common/unit/\"\n  .. ..$ @vocab          : chr \"https://api.weather.gov/ontology#\"\n  .. ..$ geometry        :List of 2\n  .. ..$ city            : chr \"s:addressLocality\"\n  .. ..$ state           : chr \"s:addressRegion\"\n  .. ..$ distance        :List of 2\n  .. ..$ bearing         :List of 1\n  .. ..$ value           :List of 1\n  .. ..$ unitCode        :List of 2\n  .. ..$ forecastOffice  :List of 1\n  .. ..$ forecastGridData:List of 1\n  .. ..$ publicZone      :List of 1\n  .. ..$ county          :List of 1\n $ id        : chr \"https://api.weather.gov/points/40.7128,-74.006\"\n $ type      : chr \"Feature\"\n $ geometry  :List of 2\n  ..$ type       : chr \"Point\"\n  ..$ coordinates:List of 2\n  .. ..$ : num -74\n  .. ..$ : num 40.7\n $ properties:List of 17\n  ..$ @id                : chr \"https://api.weather.gov/points/40.7128,-74.006\"\n  ..$ @type              : chr \"wx:Point\"\n  ..$ cwa                : chr \"OKX\"\n  ..$ forecastOffice     : chr \"https://api.weather.gov/offices/OKX\"\n  ..$ gridId             : chr \"OKX\"\n  ..$ gridX              : int 33\n  ..$ gridY              : int 35\n  ..$ forecast           : chr \"https://api.weather.gov/gridpoints/OKX/33,35/forecast\"\n  ..$ forecastHourly     : chr \"https://api.weather.gov/gridpoints/OKX/33,35/forecast/hourly\"\n  ..$ forecastGridData   : chr \"https://api.weather.gov/gridpoints/OKX/33,35\"\n  ..$ observationStations: chr \"https://api.weather.gov/gridpoints/OKX/33,35/stations\"\n  ..$ relativeLocation   :List of 3\n  .. ..$ type      : chr \"Feature\"\n  .. ..$ geometry  :List of 2\n  .. ..$ properties:List of 4\n  ..$ forecastZone       : chr \"https://api.weather.gov/zones/forecast/NYZ072\"\n  ..$ county             : chr \"https://api.weather.gov/zones/county/NYC061\"\n  ..$ fireWeatherZone    : chr \"https://api.weather.gov/zones/fire/NYZ212\"\n  ..$ timeZone           : chr \"America/New_York\"\n  ..$ radarStation       : chr \"KDIX\"\n\n\nThe glimpse() function shows all the groups of data for our chosen coordinates. Since our goal is to pull the weeks predicted weather, the information needed is stored in the endpoint named $forecast .\n\n#Assigning endpoint value\nforecast &lt;- \"https://api.weather.gov/gridpoints/OKX/33,35/forecast\"\n\n#Requesting from the API again\nask_again &lt;- \n  request(forecast) %&gt;% \n  req_perform()\n\nresponse_again &lt;- \n  resp_body_json(ask_again) %&gt;% \n  glimpse()\n\nList of 4\n $ @context  :List of 2\n  ..$ : chr \"https://geojson.org/geojson-ld/geojson-context.jsonld\"\n  ..$ :List of 5\n  .. ..$ @version: chr \"1.1\"\n  .. ..$ wx      : chr \"https://api.weather.gov/ontology#\"\n  .. ..$ geo     : chr \"http://www.opengis.net/ont/geosparql#\"\n  .. ..$ unit    : chr \"http://codes.wmo.int/common/unit/\"\n  .. ..$ @vocab  : chr \"https://api.weather.gov/ontology#\"\n $ type      : chr \"Feature\"\n $ geometry  :List of 2\n  ..$ type       : chr \"Polygon\"\n  ..$ coordinates:List of 1\n  .. ..$ :List of 5\n $ properties:List of 7\n  ..$ units            : chr \"us\"\n  ..$ forecastGenerator: chr \"BaselineForecastGenerator\"\n  ..$ generatedAt      : chr \"2024-11-29T16:13:20+00:00\"\n  ..$ updateTime       : chr \"2024-11-29T14:36:55+00:00\"\n  ..$ validTimes       : chr \"2024-11-29T08:00:00+00:00/P7DT17H\"\n  ..$ elevation        :List of 2\n  .. ..$ unitCode: chr \"wmoUnit:m\"\n  .. ..$ value   : num 2.13\n  ..$ periods          :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n  .. ..$ :List of 14\n\n\nNow, we’ll unnest and rectangle the data.\n\n\n·Converting to Tibble:\n\nresponse_df&lt;- tibble(response_again)\n\n\nstr(response_df) %&gt;% \n  print()\n\nI encountered many errors in unnesting because of the structure of the data. When using glimpse() or print() the data seeemd as though I would point to $properties to unnest.\n\n\n\n\n\nBut in using view() the data looked different. str() shows whats inside in a very readable sort of way, but view() is perfect for identifying/naming the items in code. This format was necessary to point to the appropriate items to unnest.\nSee below:\n\n\n\n\n\n\nstr(response_df$response_again[[4]]) %&gt;% \n  glimpse()\n\nList of 7\n $ units            : chr \"us\"\n $ forecastGenerator: chr \"BaselineForecastGenerator\"\n $ generatedAt      : chr \"2024-11-29T16:13:20+00:00\"\n $ updateTime       : chr \"2024-11-29T14:36:55+00:00\"\n $ validTimes       : chr \"2024-11-29T08:00:00+00:00/P7DT17H\"\n $ elevation        :List of 2\n  ..$ unitCode: chr \"wmoUnit:m\"\n  ..$ value   : num 2.13\n $ periods          :List of 14\n  ..$ :List of 14\n  .. ..$ number                    : int 1\n  .. ..$ name                      : chr \"Today\"\n  .. ..$ startTime                 : chr \"2024-11-29T11:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-11-29T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 44\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : int 20\n  .. ..$ windSpeed                 : chr \"9 to 13 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/bkn/rain_showers,20?size=medium\"\n  .. ..$ shortForecast             : chr \"Partly Sunny then Slight Chance Rain Showers\"\n  .. ..$ detailedForecast          : chr \"A slight chance of rain showers after 1pm. Partly sunny. High near 44, with temperatures falling to around 42 i\"| __truncated__\n  ..$ :List of 14\n  .. ..$ number                    : int 2\n  .. ..$ name                      : chr \"Tonight\"\n  .. ..$ startTime                 : chr \"2024-11-29T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-11-30T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 31\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : int 20\n  .. ..$ windSpeed                 : chr \"13 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/rain_showers,20/few?size=medium\"\n  .. ..$ shortForecast             : chr \"Slight Chance Rain Showers then Mostly Clear\"\n  .. ..$ detailedForecast          : chr \"A slight chance of rain showers before 7pm. Mostly clear. Low around 31, with temperatures rising to around 33 \"| __truncated__\n  ..$ :List of 14\n  .. ..$ number                    : int 3\n  .. ..$ name                      : chr \"Saturday\"\n  .. ..$ startTime                 : chr \"2024-11-30T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-11-30T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 38\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"9 to 14 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/few?size=medium\"\n  .. ..$ shortForecast             : chr \"Sunny\"\n  .. ..$ detailedForecast          : chr \"Sunny, with a high near 38. Wind chill values as low as 24. West wind 9 to 14 mph.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 4\n  .. ..$ name                      : chr \"Saturday Night\"\n  .. ..$ startTime                 : chr \"2024-11-30T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-01T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 28\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"12 to 15 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/few?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Clear\"\n  .. ..$ detailedForecast          : chr \"Mostly clear, with a low around 28. Wind chill values as low as 19. West wind 12 to 15 mph.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 5\n  .. ..$ name                      : chr \"Sunday\"\n  .. ..$ startTime                 : chr \"2024-12-01T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-01T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 37\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"12 to 15 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/sct?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Sunny\"\n  .. ..$ detailedForecast          : chr \"Mostly sunny, with a high near 37. West wind 12 to 15 mph.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 6\n  .. ..$ name                      : chr \"Sunday Night\"\n  .. ..$ startTime                 : chr \"2024-12-01T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-02T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 31\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"8 to 13 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/few?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Clear\"\n  .. ..$ detailedForecast          : chr \"Mostly clear, with a low around 31.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 7\n  .. ..$ name                      : chr \"Monday\"\n  .. ..$ startTime                 : chr \"2024-12-02T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-02T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 40\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"12 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/sct?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Sunny\"\n  .. ..$ detailedForecast          : chr \"Mostly sunny, with a high near 40.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 8\n  .. ..$ name                      : chr \"Monday Night\"\n  .. ..$ startTime                 : chr \"2024-12-02T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-03T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 32\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"9 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/sct?size=medium\"\n  .. ..$ shortForecast             : chr \"Partly Cloudy\"\n  .. ..$ detailedForecast          : chr \"Partly cloudy, with a low around 32.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 9\n  .. ..$ name                      : chr \"Tuesday\"\n  .. ..$ startTime                 : chr \"2024-12-03T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-03T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 39\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"12 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/sct?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Sunny\"\n  .. ..$ detailedForecast          : chr \"Mostly sunny, with a high near 39.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 10\n  .. ..$ name                      : chr \"Tuesday Night\"\n  .. ..$ startTime                 : chr \"2024-12-03T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-04T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 31\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"10 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/bkn?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Cloudy\"\n  .. ..$ detailedForecast          : chr \"Mostly cloudy, with a low around 31.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 11\n  .. ..$ name                      : chr \"Wednesday\"\n  .. ..$ startTime                 : chr \"2024-12-04T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-04T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 38\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"10 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/bkn?size=medium\"\n  .. ..$ shortForecast             : chr \"Partly Sunny\"\n  .. ..$ detailedForecast          : chr \"Partly sunny, with a high near 38.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 12\n  .. ..$ name                      : chr \"Wednesday Night\"\n  .. ..$ startTime                 : chr \"2024-12-04T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-05T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 32\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : int 30\n  .. ..$ windSpeed                 : chr \"10 mph\"\n  .. ..$ windDirection             : chr \"SW\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/snow,30?size=medium\"\n  .. ..$ shortForecast             : chr \"Chance Light Snow\"\n  .. ..$ detailedForecast          : chr \"A chance of snow after 7pm. Mostly cloudy, with a low around 32. Chance of precipitation is 30%.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 13\n  .. ..$ name                      : chr \"Thursday\"\n  .. ..$ startTime                 : chr \"2024-12-05T06:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-05T18:00:00-05:00\"\n  .. ..$ isDaytime                 : logi TRUE\n  .. ..$ temperature               : int 40\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : int 30\n  .. ..$ windSpeed                 : chr \"9 to 13 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/day/snow,30/snow?size=medium\"\n  .. ..$ shortForecast             : chr \"Chance Light Snow\"\n  .. ..$ detailedForecast          : chr \"A chance of snow before 1pm. Partly sunny, with a high near 40. Chance of precipitation is 30%.\"\n  ..$ :List of 14\n  .. ..$ number                    : int 14\n  .. ..$ name                      : chr \"Thursday Night\"\n  .. ..$ startTime                 : chr \"2024-12-05T18:00:00-05:00\"\n  .. ..$ endTime                   : chr \"2024-12-06T06:00:00-05:00\"\n  .. ..$ isDaytime                 : logi FALSE\n  .. ..$ temperature               : int 33\n  .. ..$ temperatureUnit           : chr \"F\"\n  .. ..$ temperatureTrend          : chr \"\"\n  .. ..$ probabilityOfPrecipitation:List of 2\n  .. .. ..$ unitCode: chr \"wmoUnit:percent\"\n  .. .. ..$ value   : NULL\n  .. ..$ windSpeed                 : chr \"13 mph\"\n  .. ..$ windDirection             : chr \"W\"\n  .. ..$ icon                      : chr \"https://api.weather.gov/icons/land/night/bkn/snow?size=medium\"\n  .. ..$ shortForecast             : chr \"Mostly Cloudy then Slight Chance Light Snow\"\n  .. ..$ detailedForecast          : chr \"A slight chance of snow after 1am. Mostly cloudy, with a low around 33.\"\n NULL\n\n\n\n\n·Selecting the Lists to Unnest\n\nforecast&lt;- tibble(response_df$response_again[[4]])\n\nOnce the main list is selected, using the $ button allows for items of interest to be selected and by extension the appropriate characters are used.\n\n\n\n\n\n\n“this will save a lot of time and error messages” - my past self\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nforecast &lt;- tibble(forecast$`response_df$response_again[[4]]`[[7]])\n\nforecast&lt;- forecast %&gt;%\n  unnest_wider(`forecast$\\`response_df$response_again[[4]]\\`[[7]]`) %&gt;% \n  print()\n## # A tibble: 14 × 14\n##    number name           startTime endTime isDaytime temperature temperatureUnit\n##     &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;   &lt;lgl&gt;           &lt;int&gt; &lt;chr&gt;          \n##  1      1 Today          2024-11-… 2024-1… TRUE               44 F              \n##  2      2 Tonight        2024-11-… 2024-1… FALSE              31 F              \n##  3      3 Saturday       2024-11-… 2024-1… TRUE               38 F              \n##  4      4 Saturday Night 2024-11-… 2024-1… FALSE              28 F              \n##  5      5 Sunday         2024-12-… 2024-1… TRUE               37 F              \n##  6      6 Sunday Night   2024-12-… 2024-1… FALSE              31 F              \n##  7      7 Monday         2024-12-… 2024-1… TRUE               40 F              \n##  8      8 Monday Night   2024-12-… 2024-1… FALSE              32 F              \n##  9      9 Tuesday        2024-12-… 2024-1… TRUE               39 F              \n## 10     10 Tuesday Night  2024-12-… 2024-1… FALSE              31 F              \n## 11     11 Wednesday      2024-12-… 2024-1… TRUE               38 F              \n## 12     12 Wednesday Nig… 2024-12-… 2024-1… FALSE              32 F              \n## 13     13 Thursday       2024-12-… 2024-1… TRUE               40 F              \n## 14     14 Thursday Night 2024-12-… 2024-1… FALSE              33 F              \n## # ℹ 7 more variables: temperatureTrend &lt;chr&gt;,\n## #   probabilityOfPrecipitation &lt;list&gt;, windSpeed &lt;chr&gt;, windDirection &lt;chr&gt;,\n## #   icon &lt;chr&gt;, shortForecast &lt;chr&gt;, detailedForecast &lt;chr&gt;\n\n\n\n·Isolating Columns of Interest\n\nforecast&lt;- forecast %&gt;% \n  select(number, name, startTime, temperature, temperatureUnit, shortForecast) %&gt;% \n  print()\n\n# A tibble: 14 × 6\n   number name            startTime    temperature temperatureUnit shortForecast\n    &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;              &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;        \n 1      1 Today           2024-11-29T…          44 F               Partly Sunny…\n 2      2 Tonight         2024-11-29T…          31 F               Slight Chanc…\n 3      3 Saturday        2024-11-30T…          38 F               Sunny        \n 4      4 Saturday Night  2024-11-30T…          28 F               Mostly Clear \n 5      5 Sunday          2024-12-01T…          37 F               Mostly Sunny \n 6      6 Sunday Night    2024-12-01T…          31 F               Mostly Clear \n 7      7 Monday          2024-12-02T…          40 F               Mostly Sunny \n 8      8 Monday Night    2024-12-02T…          32 F               Partly Cloudy\n 9      9 Tuesday         2024-12-03T…          39 F               Mostly Sunny \n10     10 Tuesday Night   2024-12-03T…          31 F               Mostly Cloudy\n11     11 Wednesday       2024-12-04T…          38 F               Partly Sunny \n12     12 Wednesday Night 2024-12-04T…          32 F               Chance Light…\n13     13 Thursday        2024-12-05T…          40 F               Chance Light…\n14     14 Thursday Night  2024-12-05T…          33 F               Mostly Cloud…\n\n\n\n\n·Finalizing the Data Frame Clean\n$startTime is in a character datatype although the datapoints are technically a date and time span. While its completely possible to convert to reflect this, I will instead use the char type to select for “dates” and create a column that I can group into days of the week.\nI indeed had to come back to this code to fix it! The API will respond very time this code is run with my key, the data will change to reflect the time and the new forecast. It is absolutely necessary to use the weekdays() to auto populate day of the week depending on the ever changing $startTime\n\nforecast$startTime &lt;- as.Date(forecast$startTime)\n\nforecast &lt;- forecast %&gt;%\n  mutate(day= weekdays(startTime)) %&gt;% \n  arrange(startTime) %&gt;% \n  group_by(startTime)\n\n\n\n·Creating a Forecast Visualization using ggplot\n\nforecast %&gt;%\n  ggplot(aes(day, temperature, fill= temperature))+\n  geom_line(linewidth = 50)+\n  facet_wrap(~day, scales = \"free_x\",\n             ncol = 7, axis.labels = \"all_y\", drop = TRUE)+\n  theme_minimal()+\n  theme(\n    panel.background = element_rect(fill = \"#FFFFFF\"),\n    panel.grid = element_line(colour =\"#FFFFFF\"))+\n  labs(title = \"7 DAY FORECAST\", caption = \"\")\n\n\n\n\n\n\n\n\n\n\n·Addressing Issues\nThe plot is close to what I intend, but there are several issues here that need to be addressed:\n\nThe API request outputs current forecast, the day of the week is not specific enough.\nThe filled blocks should be color graded to better depict the high and low of the day\nThe day of the week appears on both the top and bottom\nY axis label doesn’t specify temperature unit\nWeather forecast has an in between where the beginning of the window has only once observation (night) and the end of the window only has one observation (day). using geom_line is not efficient because it requires two points within the grouping.\nEX:\n\n\n#1 and #3 can be fixed by changing the data type of $startTime after its adjusted, the column can be used as the x in the ggplot base. Then the plot will show the day of the week and the date instead of being redundant. The column name will appear in the x axis now but we can remove that.\n#4 can be solved by adding a ylab() line to the ggplot code. #2 however becomes a little more complicated. geom_line() does not support “fill”. Its possible to use geom_point() in shape = 15 (square) and pair it with geom_line(), then adjust the size and line widths to match in a way that seems like one large box. But even so the gradient wouldn’t work.\nA possible fix pivoting wider so that the observations in $name that predict “night” temperature are in their own column. This way it would be easier to plot a range. But, for now, the visualization gets the point across.\n#5 The API returns a single weather data point when the forecast window moves. geom_tile() was an easy fix, but the visualization is not as intended.\n\n\n·ggPlot redo\n\n\n\n\n\n\n\n\n\n\n\n\n·Useful References\n\nText FormatVideo Format\n\n\n\nNote: Using Quarto for HTML Documents\n“HTML Basics”\nhttps://quarto.org/docs/output-formats/html-basics.html\nNote: Adjusting Chunks\n“Options: Chunk Options and package options”\nhttps://yihui.org/knitr/options/#text-output\nNote: Adjusting Facet themes\n“The Art of Organization: Facets and Themes in ggplot2”\nhttps://medium.com/number-around-us/the-art-of-organization-facets-and-themes-in-ggplot2-5c591bb3c54c\nNote: Starts with bigger picture and works inward to the minute details\n“WebDev4R: The Ultimate Guide To Get Data Through APIs With {httr2} and R”\nhttps://albert-rapp.de/posts/web_dev/07_httr2_ultimate_guide/07_httr2\n\n\n\n\nFULL Text Control With ggplot & {marquee} | Step-By-Step Tutorial\nhttps://www.youtube.com/watch?v=a8a_kLaYRlg\nHow to Get Data From APIs with R & {httr2} | Ultimate Step-By-Step Tutorial\nhttps://www.youtube.com/watch?v=hmtE4QGIOuk"
  }
]